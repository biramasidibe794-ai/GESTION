{% extends "base.html" %}
{% block title %}{{ title|default:"Séance" }}{% endblock %}

{% block content %}
<div class="card shadow-soft">
  <div class="card-body">
    <h3 class="mb-3">{{ title|default:"Séance" }}</h3>

    {% if form.non_field_errors %}
      <div class="alert alert-danger">{{ form.non_field_errors }}</div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.media }}

      <div class="row g-3">
        <div class="col-12 col-md-6">
          <label class="form-label">Cours</label>
          {{ form.cours }} {{ form.cours.errors }}
        </div>

        <div class="col-12 col-md-6">
          <label class="form-label">Classe</label>
          {{ form.classe }} {{ form.classe.errors }}
        </div>

        <div class="col-12 col-md-6">
          <label class="form-label">Enseignant</label>
          {{ form.enseignant }} {{ form.enseignant.errors }}
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label">Début</label>
          {{ form.debut }} {{ form.debut.errors }}
          <div class="form-text">Ex: 2025-10-23 08:00</div>
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label">Fin</label>
          {{ form.fin }} {{ form.fin.errors }}
          <div class="form-text">Ex: 2025-10-23 10:00</div>
        </div>

        {# Champs restants éventuels du formulaire (sans utiliser 'split') #}
        {% for field in form %}
          {% if field.name != 'cours' and field.name != 'classe' and field.name != 'enseignant' and field.name != 'debut' and field.name != 'fin' %}
            <div class="col-12">
              <label class="form-label">{{ field.label }}</label>
              {{ field }} {{ field.errors }}
            </div>
          {% endif %}
        {% endfor %}
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary" type="submit">Enregistrer</button>
        <a class="btn btn-outline-secondary" href="{% url 'liste_seances' %}">Annuler</a>
      </div>
    </form>

    <hr class="my-4" id="qr">
    <div class="text-muted small">
      Après enregistrement, utilisez l’écran de modification pour afficher/générer le QR code de cette séance si votre logique le prévoit.
    </div>
  </div>
</div>
{% endblock %}
