{% extends "base.html" %}
{% block title %}Tableau de bord{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0">Tableau de bord</h1>
  <span class="badge bg-primary-subtle text-primary py-2 px-3">Administration</span>
</div>

<div class="row g-4">
  <div class="col-md-4">
    <div class="card h-100 shadow-soft">
      <div class="card-header">Utilisateurs
        <span class="badge bg-white text-primary float-end">{{ counts.utilisateurs }}</span>
      </div>
      <div class="card-body">
        <!-- âœ… Noms de routes corrigÃ©s -->
        <a class="d-block mb-2" href="{% url 'admin_user_list' %}">ğŸ‘¥ Liste des utilisateurs</a>
        <a class="d-block" href="{% url 'admin_user_list' %}?role=admin">
          ğŸ” Administrateurs
          <span class="badge bg-light text-muted ms-2">{{ counts.administrateurs }}</span>
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card h-100 shadow-soft">
      <div class="card-header">Personnes
        <span class="badge bg-white text-primary float-end">
          {{ counts.enseignants|add:counts.etudiants|add:counts.parents }}
        </span>
      </div>
      <div class="card-body">
        <a class="d-block mb-2" href="{% url 'liste_enseignants' %}">
          ğŸ‘¨â€ğŸ« Enseignants <span class="text-muted ms-2">({{ counts.enseignants }})</span>
        </a>
        <a class="d-block mb-2" href="{% url 'liste_etudiants' %}">
          ğŸ“ Ã‰tudiants <span class="text-muted ms-2">({{ counts.etudiants }})</span>
        </a>
        <a class="d-block" href="{% url 'liste_parents' %}">
          ğŸ‘ª Parents <span class="text-muted ms-2">({{ counts.parents }})</span>
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card h-100 shadow-soft">
      <div class="card-header">ScolaritÃ©
        <span class="badge bg-white text-primary float-end">
          {{ counts.cours|add:counts.seances|add:counts.classes }}
        </span>
      </div>
      <div class="card-body">
        <a class="d-block mb-2" href="{% url 'liste_cours' %}">
          ğŸ“˜ Cours <span class="text-muted ms-2">({{ counts.cours }})</span>
        </a>
        <a class="d-block mb-2" href="{% url 'liste_seances' %}">
          ğŸ—“ï¸ SÃ©ances <span class="text-muted ms-2">({{ counts.seances }})</span>
        </a>
        <a class="d-block mb-2" href="{% url 'liste_classes' %}">
          ğŸ·ï¸ Classes <span class="text-muted ms-2">({{ counts.classes }})</span>
        </a>
        <a class="d-block mb-2" href="{% url 'liste_semestres' %}">
          ğŸ“… Semestres <span class="text-muted ms-2">({{ counts.semestres }})</span>
        </a>
        <a class="d-block" href="{% url 'liste_annees' %}">
          ğŸ“† AnnÃ©es <span class="text-muted ms-2">({{ counts.annees }})</span>
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card h-100 shadow-soft">
      <div class="card-header">PrÃ©sences
        <span class="badge bg-white text-primary float-end">{{ counts.presences }}</span>
      </div>
      <div class="card-body">
        <a class="d-block mb-2" href="{% url 'liste_presences' %}">
          âœ… Voir les prÃ©sences
        </a>
        <a class="d-block" href="{% url 'liste_inscriptions' %}">
          ğŸ§¾ Inscriptions <span class="text-muted ms-2">({{ counts.inscriptions }})</span>
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card h-100 shadow-soft">
      <div class="card-header">Raccourcis</div>
      <div class="card-body">
        <div class="d-flex flex-wrap gap-2">
          <a class="btn btn-outline-primary btn-sm" href="{% url 'admin_user_list' %}">Utilisateurs</a>
          <a class="btn btn-outline-primary btn-sm" href="{% url 'liste_seances' %}">SÃ©ances</a>
          <a class="btn btn-outline-primary btn-sm" href="{% url 'liste_cours' %}">Cours</a>
          <a class="btn btn-outline-primary btn-sm" href="{% url 'liste_presences' %}">PrÃ©sences</a>
          <a class="btn btn-outline-primary btn-sm" href="{% url 'qr_scanner' %}">Scanner</a>
          <a class="btn btn-outline-secondary btn-sm" href="/admin/">Admin Django</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
